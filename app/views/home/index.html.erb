<form onsubmit="text_to_processing()">
  <label>Enter text here:</label>
  <input type='text'>
  <button type="button" id='create_text'>Create Gallifreyan</button>
  <button type="button" id='save_image'>Save Image</button>
  <button type="button" id='change_bg'>Change Background</button>
</form>

<canvas id='sketch' data-processing-sources=<%= asset_path 'Gallifreyan/Gallifreyan.pde'%>></canvas>
<script type="text/javascript">
  $(document).ready(function () {
    $(window).keydown(function(event){
      if(event.keyCode == 13) {
        event.preventDefault();
        return false;
      }
    });

    $('input').keydown(function(event) {
      if (event.keyCode == 13) {
        text_to_processing();
      };
    });

    $('#create_text').click(function(event) {
      text_to_processing();
    });

    $('#save_image').click(function(event) {
      save_image();
    });

    $('#change_bg').click(function(event) {
      change_bg();
    });
  })

  function text_to_processing() {
    sketch = Processing.getInstanceById('sketch');
    sketch.accept_text($('input').val());
  }

  function save_image() {
    sketch = Processing.getInstanceById('sketch');
    sketch.save_image();
  }

  function change_bg() {
    sketch = Processing.getInstanceById('sketch');
    sketch.change_background();
  }
</script>
